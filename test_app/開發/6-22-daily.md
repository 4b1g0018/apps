# 專題開發日誌 - 2025/06/22

## 今日進度總結

今天將原本集中在單一檔案 (`main.dart`) 的程式碼，重構成模組化架構。

在此基礎上，我們實作了使用者登入後「開始訓練」的核心流程，完成了從**主選單 -> 選擇訓練部位 -> 顯示對應訓練動作列表**的完整 UI 流程。

---

## 核心目標：從單一檔案到模組化架構

在開發初期，將所有程式碼放在 `main.dart` 是很方便的。但隨著專案規模擴大，這種做法會讓程式碼變得難以閱讀和維護。

因此，今天我們導入了「關注點分離 (Separation of Concerns)」這個重要的軟體工程原則，將專案拆分成不同的資料夾與檔案，每個部分各司其職。

**這樣做的好處：**
1.  **可維護性 (Maintainability)**：當我想修改「登入頁」的畫面時，我只需要去 `pages/login_page.dart` 這個檔案，而不用在數千行程式碼中尋找。
2.  **可讀性 (Readability)**：每個檔案的功能都非常單一且明確，讓任何人（包括幾個月後的自己）都能快速理解程式碼的用途。
3.  **可擴展性 (Scalability)**：未來要新增功能（例如「商城頁面」或「藍牙連線服務」），我只需要在對應的資料夾中建立新檔案即可，不會影響到現有功能。
4.  **可重用性 (Reusability)**：像 `DatabaseHelper` 這樣的服務，可以在 App 的任何地方被重複呼叫，不需重寫。

---

## 新增的資料夾與檔案結構介紹

我們將 `lib` 資料夾底下，重新規劃成以下結構：


lib/
├── main.dart             # App 的總入口，只負責啟動。
|
├── models/               # 【藍圖/規格表】資料夾
│   └── exercise_model.dart # 定義 App 中用到的資料結構 (如 BodyPart, Exercise)。
|
├── pages/                # 【展示廳】資料夾 (所有 UI 頁面)
│   ├── login_page.dart       # 登入與註冊頁面
│   ├── main_menu_page.dart   # 登入後的主選單頁面
│   ├── select_part_page.dart # 選擇訓練部位的頁面
│   └── select_exercise_page.dart # 選擇具體訓練動作的頁面
|
└── services/             # 【後勤部門/工具箱】資料夾
├── database_helper.dart  # 專門負責與 SQLite 資料庫溝通
└── mock_data_service.dart # 專門提供假資料，供 UI 開發測試用


### 各資料夾的角色：

* **`models/`**：這裡是我們 App 的**藍圖中心**。它不包含任何畫面或功能，只定義「資料該長什麼樣子」。例如，我們在這裡定義了 `Exercise` 這個類別，規定一個「訓練動作」必須有名稱、說明和圖片。
* **`pages/`**：這裡是我們 App 的**門面**。所有使用者看得到的畫面、按鈕、文字等 UI 相關的程式碼，都放在這裡。
* **`services/`**：這裡是我們 App 的**後勤與支援部門**。所有在背景運作、提供功能或資料的「服務」，都放在這裡。例如與資料庫的連接、未來與藍牙硬體的連接等等。

---

## 今日具體實作流程

1.  **架構重構**：將舊 `main.dart` 中的 `LoginPage`, `MainMenuPage`, `DatabaseHelper` 類別，分別拆分到 `pages` 和 `services` 資料夾下的獨立檔案中，讓 `main.dart` 變得乾淨簡潔。
2.  **擴充模型**：在 `models/exercise_model.dart` 中，新增了 `Exercise` 類別，為「訓練動作」建立了標準的資料格式。
3.  **建立假資料服務**：建立了 `services/mock_data_service.dart`，讓我們在沒有真實後端的情況下，也能有資料來開發和測試 UI 介面。
4.  **開發新頁面**：建立了 `pages/select_exercise_page.dart`，此頁面能接收傳入的「身體部位」，並向 `MockDataService` 請求對應的動作資料，最後以「左圖右文」的列表樣式呈現出來。
5.  **串連流程**：修改了 `pages/select_part_page.dart`，讓使用者點擊部位卡片後，能成功跳轉到顯示動作列表的新頁面，完成了功能的串接。

---

## 下一步規劃

接下來，我們將繼續沿著這個新架構，實作訓練流程的下一步：**「設定訓練時間、休息時間與組數」的頁面**。

